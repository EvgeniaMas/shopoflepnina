!function(a,b,c,d){function g(d,g){this.element=d,this.galleryContainer=a(this.element),this.bigItemsList=this.galleryContainer.children("ul:eq(1)"),this.bigItem=this.bigItemsList.children("li"),this.options=a.extend({},f,g),this._defaults=f,this._name=e,this.current="",this.slideshow=!1,this.count=this.bigItem.length,this.initialHeight="auto",this.isFullScreen=!1,this.$controls=a(".controls"),this.$control=a(".control"),this.$grid=a(".grid"),this.$fsButton=a(".fs-toggle"),this.$document=a(c),this.$window=a(b),this.init()}var e="sGallery",f={fullScreenEnabled:!1};g.prototype={init:function(){var b=this.galleryContainer.find("ul:eq(0)"),d=(b.children("li"),this.options);this.setDelays(b),this.bindListHandler(b),this.handleQuit(),this.controlSlideShow(this.count),d.fullScreenEnabled&&this.controlFullScreen(),this.changeHeight(),this.handleTouch()},handleTouch:function(){var a=this;this.bigItem.on("dragstart",function(a){a.preventDefault()});Hammer(this.element).on("swipeleft",function(b){a.slideshow&&a.controlLeftRight("next")}),Hammer(this.element).on("swiperight",function(b){a.slideshow&&a.controlLeftRight("previous")})},changeHeight:function(a){var b=this,a=a||0,c=this.bigItemsList.children("li:eq("+b.current+")");this.initialHeight=this.galleryContainer.outerHeight(),this.minHeight=c.height()+parseInt(this.bigItem.css("top"))+2*this.$controls.height(),this.adaptHeight(a),this.$window.load(function(){b.$window.resize(function(){b.initialHeight=b.galleryContainer.outerHeight(),b.minHeight=b.bigItem.height()+parseInt(b.bigItem.css("top"))+2*b.$controls.height(),b.adaptHeight(a)}),b.$window.trigger("resize")})},adaptHeight:function(b){var c=this;this.bigItem.outerHeight();c.slideshow&&c.initialHeight<c.minHeight?a(c.element).animate({height:c.minHeight+"px"},b):c.slideshow&&c.initialHeight>c.minHeight&&a(this.element).animate({height:c.minHeight+"px"},b)},setDelays:function(b){b.children("li").each(function(b){a(this).css("animation-delay",.075*b+"s")})},bindListHandler:function(b){var c=this;b.on("click","li",function(b){b.preventDefault();var d=a(this);c.current=d.index(),c.fadeAllOut(),c.showControls(),c.slideshow=!0,startImg=c.bigItemsList.children("li:eq("+c.current+")");c.current+1;d.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(a){startImg.addClass("fadeInScaleUp").removeClass("fadeOut"),c.bigItemsList.css("pointer-events","auto"),c.changeHeight(600)})})},fadeAllOut:function(){this.galleryContainer.children("ul:eq(0)").children("li").removeClass("scaleUpFadeIn").removeClass("showLastSecond").addClass("scaleDownFadeOut")},fadeAllIn:function(){var a=this,b=this.galleryContainer.children("ul:eq(0)").children("li:eq("+a.current+")");this.galleryContainer.children("ul:eq(0)").children("li").not(b).removeClass("scaleDownFadeOut").addClass("scaleUpFadeIn"),b.removeClass("scaleDownFadeOut").addClass("showLastSecond")},showControls:function(){this.$controls.addClass("showControls").removeClass("hideControls")},hideControls:function(){this.$controls.addClass("hideControls").removeClass("showControls")},controlSlideShow:function(c){var e,d=this;this.$document.on("keydown",function(a){var a=a||b.event;e=a.keyCode,37==e&&d.slideshow?(d.current--,d.current<0&&(d.current=c-1),d.moveToNextImage()):39==e&&d.slideshow&&(d.current++,d.current==c&&(d.current=0),d.moveToNextImage())}),this.$control.on("click",function(){var b=a(this).data("direction");d.controlLeftRight(b)})},controlLeftRight:function(a){var a=a;"next"==a?this.current++:this.current--,this.current<0?this.current=this.count-1:this.current==this.count&&(this.current=0),this.moveToNextImage()},moveToNextImage:function(){var b=this,c=this.bigItemsList.children("li:eq("+b.current+")");this.current+1;c.addClass("fadeInScaleUp").siblings("li").filter(".fadeInScaleUp").removeClass("fadeInScaleUp").addClass("fadeOut").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(b){a(this).removeClass("fadeOut")}),this.changeHeight(600)},handleQuit:function(){var a=this;this.$document.on("keydown",function(c){var c=c||b.event;key=c.keyCode,16==key&&a.slideshow&&a.quitSlideShow()}),this.$grid.on("click",function(){a.quitSlideShow()})},controlFullScreen:function(){var b=this,c=this.element;this.$fsButton.css("display","inline-block").on("click",function(){return!!screenfull.enabled&&(screenfull.toggle(c),void(b.isFullScreen?(a(this).removeClass("icon-fullscreen-exit").addClass("icon-fullscreen"),b.isFullScreen=!1):(a(this).removeClass("icon-fullscreen").addClass("icon-fullscreen-exit"),b.isFullScreenfull=!0)))})},quitSlideShow:function(b){this.hideControls(),this.fadeAllIn(),this.slideshow=!1;var c=this;this.isFullScreen||this.galleryContainer.animate({height:c.initialHeight},0,function(){a(this).css("height","auto")}),this.bigItemsList.css("pointer-events","none");var d=this.galleryContainer.children("ul:eq(1)").children("li:eq("+c.current+")"),e=this.galleryContainer.children("ul:eq(0)").children("li:eq("+c.current+")"),f=e.height()-e.find(".item-price").height(),g=e.width(),h=e.position().left,i=e.position().top,j=parseFloat(e.css("animation-delay")),k=parseFloat(e.css("animation-duration")),l=j+k;d.find(".img-caption").css("opacity","0"),d.children("img").andSelf().animate({height:f,width:g,left:h+"px",top:i+"px"},1e3*l,function(){a(this).removeClass("fadeInScaleUp").removeAttr("style"),d.find(".img-caption").css("opacity","1")})}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}}(jQuery,window,document);